# QTBot

一个PQT的wiki机器人，基于qq平台运行，用于查询游戏角色数据，通常角色、女神。

（无法显示图片，藤子不给）

## 配置

> .env.prod

想要在qq中运行，需要前往qq机器人开放平台申请机器人。

```text
DRIVER=~httpx+~websockets
LOCALSTORE_USE_CWD=true
LOG_LEVEL=DEBUG

# 服务器配置
HOST=127.0.0.1
PORT=8080
DEBUG=true
QQ_IS_SANDBOX=true
QQ_BOTS='[
  {
    "id": "机器人id",
    "token": "机器人令牌",
    "secret": "机器人秘钥",
    "type": "机器人类型",
    "intent": {
      "c2c_group_at_messages": true
    }
  }
]'
```

## 运行

可使用ENVIRONMENT参数指定配置文件(.env.xxx)

> 需修改driver, 如qq机器人，需要from nonebot.adapters.qq import Adapter

ENVIRONMENT=dev_console nb run

如果没有导入数据的话, 先执行以下命令再运行：

> python -m scripts.import_mock_data

## 使用指南

1、基本格式

> @机器人 /查询 <角色>

<角色>可以是游戏内名称，或者任一别名。

不加其他参数，默认显示：满星（主动技能+觉醒被动），以及天赋数据，如下：

> @QT游戏姬-测试中 /查询 星神

```text
Aeon's Echo Athena「8★」

![avatar](图)

别名: 星神, 星神雅典娜
标签: 运动, 3年级, 雷, 联动角色, 反伤坦
爱好: 向阿波罗学习
羁绊: 白狼, 卡米尔

主动技: 闪光护盾「lv5」| 冷却: 5

对2个敌人造成相当于雅典娜攻击力0.75倍的雷电伤害。

赋予其他角色反伤效果，将技能攻击伤害的40%（不包括减益伤害）反射给敌人，持续8回合。

对雅典娜施加圣盾效果；圣盾数值为目标战斗初始生命值的0.2倍。若角色在5回合内受到直接攻击，则先扣除角色自身的圣盾数值。

在护盾增益效果持续时间结束时，将剩余的神圣护盾值作为伤害施加到敌方队伍的生命值上。

圣盾激活时，受到的持续伤害增加5% 。

觉醒被动: 不动如山「lv3」

战斗开始时，3个角色有80%的几率闪避“雷霆”效果，持续16回合。

战斗开始时，使雅典娜受到的伤害减少30%，其他角色受到的伤害减少20%，持续16回合。

战斗开始时，赋予雅典娜嘲讽效果；所有非风属性敌人优先攻击她自己，风属性敌人优先攻击其他队友，持续16回合。

天赋: 释放潜能「lv10」

使2名角色的攻击力和生命值提高10%。
```

2、进阶

查询时，可携带参数，以半角短线连接，可用参数：角色-<星级>-技能<等级>-皮肤<序号>:<等级>-天赋<等级>-背景， 一次最多携带3个。

星级，序号，等级可缺省，默认值分别为：8，1，10，<星级>同等于'技能'，如：7星=技能7。

比方说，想要查看3星雅典娜，1号皮肤2级数据时，则为：

> @QT游戏姬-测试中 /查询 雅典娜-3星-皮肤1:2

```text
Athana「3★」

![avatar](图)

别名: 雅典娜, 女神雅典娜
标签: 歼灭, 女神, 百分比
生日: 07-14
身高/体重/三围: 168cm/44kg/34E-23-31
皮肤: 1-蕾丝内衣

主动技: 雷霆圣火「lv3」| 冷却: 6

对1名敌人造成相当于雅典娜攻击力0.8倍的伤害。

对2个敌人施加雷霆效果；每回合造成8%或10%最大生命值伤害，持续3回合。

战斗开始时，使2个火属性角色的回复能力提高50%，1个水属性角色的回复能力提高50%；此效果以攻击力最高的水属性角色为目标。

战斗开始时，使2名文学或体育角色的技能受到的伤害降低20%，持续16回合。

[皮肤]: 1-蕾丝内衣

![skin](图)

- 蕾丝的秘密治疗「lv2」: 如果队伍生命值低于或等于50%，则回复2名角色0.8倍回复量的生命值。（仅计算进入战斗前的恢复量）
```